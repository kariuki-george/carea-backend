generator client {
  provider = "prisma-client-js"
  output   = "./../../../node_modules/@prisma/orders/client"

}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum OfferStatus {
  ACCEPTED
  DECLINED
  PROCESSING
}

enum OrderStatus {
  PROCESSING
  DELIVERY
  COMPLETED
  CANCELLED
  REFUND
  UNPAID
}

model order {
   id       String @id @default(auto()) @map("_id") @db.ObjectId
   userId   String
   addressId    String
   status     OrderStatus @default(PROCESSING)
   carId  String
offer offer?

}

model offer {
  id   String @id @default(auto()) @map("_id") @db.ObjectId
  status OfferStatus   @default(PROCESSING)
  amount Int
  userId String
  carId String
  valid Boolean @default(true)
  order order? @relation(fields: [orderId],references: [id])
   orderId   String? @db.ObjectId @unique
}

model chat {
    id   String @id @default(auto()) @map("_id") @db.ObjectId
    userId String
    carId   String
    messages message[]
}

model message{
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  buyer Boolean @default(true)
  message String
  chat   chat   @relation(fields: [chatId], references: [id])
  chatId String @db.ObjectId 
  createdAt DateTime @default(now())
}
